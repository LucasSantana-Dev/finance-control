# Log Organization by Type and Script

## Overview

Project logs have been organized into specific subdirectories within `/logs` to facilitate location, maintenance, and analysis of different types of logs and reports.

## Directory Structure

```
finance-control/
├── logs/                          # Root logs directory
│   ├── application/               # Spring Boot application logs
│   │   ├── finance-control.log    # Main application log
│   │   └── finance-control-error.log # Application error log
│   │
│   ├── checkstyle/                # Code style verification logs
│   │   ├── checkstyle_*.log       # Style verifications
│   │   ├── checkstyle_summary_*.txt # Verification summaries
│   │   ├── fix-checkstyle_*.log   # Automatic fixes
│   │   ├── fix-checkstyle_summary_*.txt # Fix summaries
│   │   ├── fix-remaining-checkstyle_*.log # Manual fixes
│   │   └── fix-remaining-checkstyle_summary_*.txt # Manual fix summaries
│   │
│   ├── quality/                   # Code quality verification logs
│   │   ├── quality-check_*.log    # Complete quality verifications
│   │   └── quality-check-summary_*.txt # Verification summaries
│   │
│   ├── gradle/                    # Gradle task logs
│   │   ├── gradle_*_*.log         # Detailed task logs
│   │   └── gradle_*_summary_*.txt # Execution summaries
│   │
│   ├── docker/                    # Docker operation logs
│   │   ├── docker-run_*.log       # Container execution
│   │   └── docker-build-test_*.log # Docker build tests
│   │
│   └── environment/               # Environment test logs
│       ├── gradle-test_*.log      # Gradle tests
│       ├── gradle-build-test_*.log # Build tests
│       └── app-startup-test_*.log # Startup tests
```

## Categorization by Type

### 1. Application Logs (`logs/application/`)
**Purpose**: Logs generated by the running Spring Boot application
- **Files**: `finance-control.log`, `finance-control-error.log`
- **Content**: Application logs, HTTP requests, database operations
- **Generation**: Automatic by Spring Boot application
- **Configuration**: `logback-spring.xml`

### 2. Checkstyle Logs (`logs/checkstyle/`)
**Purpose**: Code style verification and fix logs
- **Scripts**: `checkstyle-log.sh`, `fix-checkstyle.sh`, `fix-remaining-checkstyle.sh`
- **Files**: 
  - `checkstyle_*.log` - Style verifications
  - `fix-checkstyle_*.log` - Automatic fixes
  - `fix-remaining-checkstyle_*.log` - Manual fixes
  - `*_summary_*.txt` - Execution summaries

### 3. Quality Logs (`logs/quality/`)
**Purpose**: Complete code quality verification logs
- **Script**: `quality-check.sh`
- **Files**: `quality-check_*.log`, `quality-check-summary_*.txt`
- **Content**: Checkstyle, PMD, SpotBugs verifications, tests

### 4. Gradle Logs (`logs/gradle/`)
**Purpose**: Gradle task logs executed via script
- **Script**: `gradle-with-logs.sh`
- **Files**: `gradle_{task}_{timestamp}.log`, `gradle_{task}_summary_{timestamp}.txt`
- **Examples**: `gradle_build_20250702_013000.log`, `gradle_test_20250702_013000.log`

### 5. Docker Logs (`logs/docker/`)
**Purpose**: Docker operation logs
- **Scripts**: `docker-run.sh`, `test-fixes.sh` (docker-build-test)
- **Files**: `docker-run_*.log`, `docker-build-test_*.log`
- **Content**: Container execution, Docker builds

### 6. Environment Logs (`logs/environment/`)
**Purpose**: Environment test and verification logs
- **Scripts**: `fix-environment.sh`, `test-fixes.sh`
- **Files**: 
  - `gradle-test_*.log` - Gradle tests
  - `gradle-build-test_*.log` - Build tests
  - `app-startup-test_*.log` - Startup tests

## Naming Conventions

### General Pattern
```
{script-type}_{operation}_{timestamp}.log
{script-type}_{operation}_summary_{timestamp}.txt
```

### Examples by Category

#### Checkstyle
- `checkstyle_20250702_012745.log`
- `fix-checkstyle_summary_20250702_012128.txt`
- `fix-remaining-checkstyle_20250702_012326.log`

#### Quality
- `quality-check_20250702_013000.log`
- `quality-check-summary_20250702_013000.txt`

#### Gradle
- `gradle_build_20250702_013000.log`
- `gradle_test_summary_20250702_013000.txt`

#### Docker
- `docker-run_20250702_013000.log`
- `docker-build-test_20250702_013000.log`

#### Environment
- `gradle-test_20250702_013000.log`
- `app-startup-test_20250702_013000.log`

## Updated Scripts

### Quality Scripts
- `scripts/quality/checkstyle-log.sh` → `logs/checkstyle/`
- `scripts/quality/fix-checkstyle.sh` → `logs/checkstyle/`
- `scripts/quality/fix-remaining-checkstyle.sh` → `logs/checkstyle/`
- `scripts/quality/quality-check.sh` → `logs/quality/`

### Build Scripts
- `scripts/build/gradle-with-logs.sh` → `logs/gradle/`

### Docker Scripts
- `scripts/docker/docker-run.sh` → `logs/docker/`

### Environment Scripts
- `scripts/environment/fix-environment.sh` → `logs/environment/`
- `scripts/environment/test-fixes.sh` → `logs/environment/` and `logs/docker/`

## Usage and Navigation

### Viewing Logs by Category

#### Application Logs
```bash
# View main logs
tail -f logs/application/finance-control.log

# View error logs
tail -f logs/application/finance-control-error.log
```

#### Checkstyle Logs
```bash
# View recent verifications
ls -la logs/checkstyle/checkstyle_*.log | tail -5

# View automatic fixes
ls -la logs/checkstyle/fix-checkstyle_*.log | tail -5

# View summaries
cat logs/checkstyle/*_summary_*.txt
```

#### Quality Logs
```bash
# View quality verifications
ls -la logs/quality/quality-check_*.log | tail -5

# View summaries
cat logs/quality/*_summary_*.txt
```

#### Gradle Logs
```bash
# View recent builds
ls -la logs/gradle/gradle_build_*.log | tail -5

# View recent tests
ls -la logs/gradle/gradle_test_*.log | tail -5
```

#### Docker Logs
```bash
# View Docker executions
ls -la logs/docker/docker-run_*.log | tail -5

# View Docker builds
ls -la logs/docker/docker-build-test_*.log | tail -5
```

#### Environment Logs
```bash
# View environment tests
ls -la logs/environment/gradle-test_*.log | tail -5

# View startup tests
ls -la logs/environment/app-startup-test_*.log | tail -5
```

### Log Analysis

#### Error Search
```bash
# Search for errors in all logs
grep -i error logs/*/*.log

# Search for errors in specific category
grep -i error logs/checkstyle/*.log
```

#### Size Analysis
```bash
# Check size by category
du -h logs/*/

# Check for large files
find logs/ -name "*.log" -size +1M
```

#### Old Logs Cleanup
```bash
# Remove logs older than 30 days
find logs/ -name "*.log" -mtime +30 -delete

# Remove summaries older than 7 days
find logs/ -name "*_summary_*.txt" -mtime +7 -delete
```

## Benefits of Organization

### 1. Easy Location
- Logs organized by type and purpose
- Intuitive navigation by category
- Efficient search for specific problems

### 2. Simplified Maintenance
- Selective cleanup by category
- Specific backup by type
- Focused analysis by area

### 3. Improved Debugging
- Isolation of problems by category
- Organized history of executions
- Easy comparison between different types of logs

### 4. Improved Observability
- Clear view of each area's state
- Trend tracking by category
- Quick identification of patterns

## Docker Integration

### Mounted Volumes
```yaml
volumes:
  - ./logs:/app/logs
```

### Access to Organized Logs
```bash
# Inside container
ls -la /app/logs/application/
ls -la /app/logs/checkstyle/

# From host
ls -la logs/application/
ls -la logs/checkstyle/
```

## Maintenance and Cleanup

### Automated Cleanup Script
```bash
#!/bin/bash
# clean-logs.sh

# Clean old logs by category
find logs/application/ -name "*.log" -mtime +30 -delete
find logs/checkstyle/ -name "*.log" -mtime +7 -delete
find logs/quality/ -name "*.log" -mtime +7 -delete
find logs/gradle/ -name "*.log" -mtime +7 -delete
find logs/docker/ -name "*.log" -mtime +7 -delete
find logs/environment/ -name "*.log" -mtime +7 -delete

# Clean old summaries
find logs/ -name "*_summary_*.txt" -mtime +3 -delete
```

### Backup by Category
```bash
#!/bin/bash
# backup-logs.sh

timestamp=$(date +"%Y%m%d_%H%M%S")

# Backup by category
tar -czf logs-backup-application-${timestamp}.tar.gz logs/application/
tar -czf logs-backup-checkstyle-${timestamp}.tar.gz logs/checkstyle/
tar -czf logs-backup-quality-${timestamp}.tar.gz logs/quality/
tar -czf logs-backup-gradle-${timestamp}.tar.gz logs/gradle/
tar -czf logs-backup-docker-${timestamp}.tar.gz logs/docker/
tar -czf logs-backup-environment-${timestamp}.tar.gz logs/environment/

# Complete backup
tar -czf logs-backup-complete-${timestamp}.tar.gz logs/
```

## Conclusion

Organizing logs in subdirectories by type and script provides:

- **Clear Organization**: Each type of log has its specific location
- **Simplified Maintenance**: Selective cleanup and backup
- **Improved Debugging**: Quick problem location
- **Improved Observability**: Organized system view
- **Scalability**: Structure that grows with the project

All scripts were updated to use the new structure, maintaining existing functionality while significantly improving organization and ease of use. 